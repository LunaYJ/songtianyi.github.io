<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<header style="padding-bottom:50px">
<ul>
	<li style="float:left;padding-right:20px"><a href="../../index.html">Home</a></li>
</ul>
</header>

<style type="text/css">
	div{
		font-size:11pt;
	}
	p{
		text-indent:2em;/*段落缩进*/
		line-height:140%;/*行间距*/
	}
	blockquote {
		background:#f9f9f9;
		border-left:10px solid darkblue;
	}
	blockquote p {
		display:inline;
	}
</style>

<!--code examples

<a href=""></a>

<li><a style="text-decoration:none" href="#"></a></li>

<h2 id=""></h2>

<div style="text-align:center">
	<img  src="">
	<p>图 </p>
	</div>
		
	<sup>sup>

	<div style="background:#eee;border:1px solid #ccc;padding:5px 10px;">
	</div>

	-->


	<div>

		<!--博文标题和作者信息-->
		<h2 style="text-align:center">Drainage Ditches-max_flow</h2>
		<h5 style="text-align:right">update@2011-08-23</h5>
		     <div style="background:#fdfdfd;color:black;"><br></div><br>     <div style="font-family: Consolas, 'Lucida Console', 'Courier New'; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"> <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">Edmonds_Karp</span>(<span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">source</span><span style="color: rgb(0, 0, 0);">,</span> <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">sink</span><span style="color: rgb(0, 0, 0);">,</span> <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">vertex_num</span>)<br> <span style="color: rgb(0, 0, 0);">{</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">maxFlow</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">0</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">while</span>(<span style="color: rgb(0, 128, 0); font-weight: bold;">true</span>) <span style="color: rgb(0, 0, 0);">{</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">head</span><span style="color: rgb(0, 0, 0);">,</span> <span style="color: rgb(0, 0, 0);">tail</span><span style="color: rgb(0, 0, 0);">,</span> <span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">UPPER</span><span style="color: rgb(0, 0, 0);">],</span> <span style="color: rgb(0, 0, 0);">my_stack</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">UPPER</span><span style="color: rgb(0, 0, 0);">];</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">head</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">tail</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">0</span>;<span style="color: rgb(128, 128, 128);">//初始化栈</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">my_stack</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">tail</span><span style="color: rgb(48, 48, 48);">++</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">source</span>;<span style="color: rgb(128, 128, 128);">//放入源点</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">memset</span>(<span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">,</span> <span style="color: rgb(48, 48, 48);">-</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span><span style="color: rgb(0, 0, 0);">,</span> <span style="color: rgb(0, 128, 0); font-weight: bold;">sizeof</span>(<span style="color: rgb(0, 0, 0);">pre_of</span>));<span style="color: rgb(128, 128, 128);">//pre_of[v],v 代表边u v</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">while</span>(<span style="color: rgb(0, 0, 0);">head</span> <span style="color: rgb(48, 48, 48);">&lt;</span> <span style="color: rgb(0, 0, 0);">tail</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">u</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">my_stack</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">head</span><span style="color: rgb(48, 48, 48);">++</span><span style="color: rgb(0, 0, 0);">];</span><span style="color: rgb(128, 128, 128);">//取出u点</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">for</span>(<span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">v</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">1</span>; <span style="color: rgb(0, 0, 0);">v</span> <span style="color: rgb(48, 48, 48);">&lt;=</span> <span style="color: rgb(0, 0, 0);">vertex_num</span>; <span style="color: rgb(0, 0, 0);">v</span> <span style="color: rgb(48, 48, 48);">++</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">if</span>(<span style="color: rgb(0, 0, 0);">residual</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">][</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">&gt;</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">0</span> <span style="color: rgb(48, 48, 48);">&amp;&amp;</span> <span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">==</span> <span style="color: rgb(48, 48, 48);">-</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span>) <span style="color: rgb(0, 0, 0);">{</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">my_stack</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">tail</span><span style="color: rgb(48, 48, 48);">++</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">v</span>;<span style="color: rgb(128, 128, 128);">/*入栈*/</span><span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">u</span>;<span style="color: rgb(128, 128, 128);">/*保存这条边*/</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">if</span>(<span style="color: rgb(0, 0, 0);">u</span> <span style="color: rgb(48, 48, 48);">==</span> <span style="color: rgb(0, 0, 0);">sink</span>)&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">break</span>;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">if</span>(<span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">sink</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">!=</span> <span style="color: rgb(48, 48, 48);">-</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span>) <span style="color: rgb(0, 128, 0); font-weight: bold;">break</span>;<span style="color: rgb(128, 128, 128);">//找到增广路径</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">if</span>(<span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">sink</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">==</span> <span style="color: rgb(48, 48, 48);">-</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span>) <span style="color: rgb(0, 128, 0); font-weight: bold;">break</span>;<span style="color: rgb(128, 128, 128);">//没有增广路径</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">min_flow</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">INF</span>;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">for</span>(<span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">v</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">sink</span>; <span style="color: rgb(0, 0, 0);">v</span> <span style="color: rgb(48, 48, 48);">!=</span> <span style="color: rgb(0, 0, 0);">source</span>; <span style="color: rgb(0, 0, 0);">v</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">])</span> <span style="color: rgb(0, 0, 0);">{</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">min_flow</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">mymin</span>(<span style="color: rgb(0, 0, 0);">min_flow</span><span style="color: rgb(0, 0, 0);">,</span> <span style="color: rgb(0, 0, 0);">residual</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">]][</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">]);</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(128, 128, 128);">//对pre保存的路径进行回溯找到最小的流</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">maxFlow</span> <span style="color: rgb(48, 48, 48);">+=</span> <span style="color: rgb(0, 0, 0);">min_flow</span>;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">for</span>(<span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">v</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">sink</span>; <span style="color: rgb(0, 0, 0);">v</span> <span style="color: rgb(48, 48, 48);">!=</span> <span style="color: rgb(0, 0, 0);">source</span>; <span style="color: rgb(0, 0, 0);">v</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">])</span> <span style="color: rgb(0, 0, 0);">{</span><span style="color: rgb(128, 128, 128);">//更新流网络</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">residual</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">]][</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">-=</span> <span style="color: rgb(0, 0, 0);">min_flow</span>;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">residual</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">][</span><span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">]]</span> <span style="color: rgb(48, 48, 48);">+=</span> <span style="color: rgb(0, 0, 0);">min_flow</span>;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">return</span> <span style="color: rgb(0, 0, 0);">maxFlow</span>;<br> <span style="color: rgb(0, 0, 0);">}</span><br></div><br><hr><br>题目链接:<a rel="nofollow" href="http://poj.grids.cn/practice/1273/">Drainage Ditches</a><br>基础的最大流问题，先google下Ford-Fulkerson熟悉最大流及求解思想，再来做这个题。最开始自己写DFS 无数次WA，最后改了两个地方是TLE :( ，有些地方还是不清楚，无语中....无奈套模板AC..<br><hr><div style="background:#fdfdfd;color:black;"><br></div>     <div style="font-family: Consolas, 'Lucida Console', 'Courier New'; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"> <span style="color: rgb(128, 128, 128);">//部分代码</span><br> <span style="color: rgb(128, 128, 128);">//纯粹的Ford Fulkerson思想</span><br> <span style="color: rgb(128, 128, 128);">//纯DFS，回溯时更新流，比模板简单、短很多</span><br> <span style="color: rgb(128, 128, 128);">//效率略低，10ms</span><br> <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">matrix</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 208); font-weight: bold;">200</span><span style="color: rgb(48, 48, 48);">+</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span><span style="color: rgb(0, 0, 0);">][</span><span style="color: rgb(0, 0, 208); font-weight: bold;">200</span><span style="color: rgb(48, 48, 48);">+</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span><span style="color: rgb(0, 0, 0);">],</span><span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 208); font-weight: bold;">200</span><span style="color: rgb(48, 48, 48);">+</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span><span style="color: rgb(0, 0, 0);">];</span><br> <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">DFS</span>(<span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">min_flow</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">k</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">if</span>(<span style="color: rgb(0, 0, 0);">i</span> <span style="color: rgb(48, 48, 48);">==</span> <span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(48, 48, 48);">-</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span>;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">return</span> <span style="color: rgb(0, 0, 0);">min_flow</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">for</span>(<span style="color: rgb(0, 0, 0);">k</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">1</span>;<span style="color: rgb(0, 0, 0);">k</span> <span style="color: rgb(48, 48, 48);">&lt;=</span> <span style="color: rgb(0, 0, 0);">v</span>;<span style="color: rgb(0, 0, 0);">k</span><span style="color: rgb(48, 48, 48);">++</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">if</span>(<span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">k</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">==</span> <span style="color: rgb(48, 48, 48);">-</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span> <span style="color: rgb(48, 48, 48);">&amp;&amp;</span> <span style="color: rgb(0, 0, 0);">matrix</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">][</span><span style="color: rgb(0, 0, 0);">k</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">&gt;</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">0</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">k</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">i</span>;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">t</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">DFS</span>(<span style="color: rgb(0, 0, 0);">k</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">mymin</span>(<span style="color: rgb(0, 0, 0);">min_flow</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">matrix</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">][</span><span style="color: rgb(0, 0, 0);">k</span><span style="color: rgb(0, 0, 0);">]));</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">if</span>(<span style="color: rgb(0, 0, 0);">t</span> <span style="color: rgb(48, 48, 48);">!=</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">0</span><span style="color: rgb(0, 0, 0);">){</span><span style="color: rgb(128, 128, 128);">//有一条增广路径</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">matrix</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">k</span><span style="color: rgb(0, 0, 0);">][</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">+=</span> <span style="color: rgb(0, 0, 0);">t</span>;<span style="color: rgb(0, 0, 0);">matrix</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">][</span><span style="color: rgb(0, 0, 0);">k</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">-=</span> <span style="color: rgb(0, 0, 0);">t</span>;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">k</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(48, 48, 48);">-</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span>; <span style="color: rgb(0, 128, 0); font-weight: bold;">return</span> <span style="color: rgb(0, 0, 0);">t</span>;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(48, 48, 48);">-</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">return</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">0</span>;<br> <span style="color: rgb(0, 0, 0);">}</span><br> <span style="color: rgb(128, 128, 128);">//main函数中的主要部分</span><br> <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">e</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">i</span>;<br> <span style="color: rgb(0, 128, 0); font-weight: bold;">while</span>(<span style="color: rgb(0, 0, 0);">scanf</span>(<span style="background-color: rgb(255, 240, 240);">"%d%d"</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 48);">&amp;</span><span style="color: rgb(0, 0, 0);">e</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 48);">&amp;</span><span style="color: rgb(0, 0, 0);">v</span>) <span style="color: rgb(48, 48, 48);">!=</span> <span style="color: rgb(0, 0, 0);">EOF</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">memset</span>(<span style="color: rgb(0, 0, 0);">matrix</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 208); font-weight: bold;">0</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 128, 0); font-weight: bold;">sizeof</span>(<span style="color: rgb(0, 0, 0);">matrix</span>));<span style="color: rgb(128, 128, 128);">//0表示没有</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">memset</span>(<span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 48);">-</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 128, 0); font-weight: bold;">sizeof</span>(<span style="color: rgb(0, 0, 0);">pre_of</span>));<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">for</span>(<span style="color: rgb(0, 0, 0);">i</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">0</span>;<span style="color: rgb(0, 0, 0);">i</span> <span style="color: rgb(48, 48, 48);">&lt;</span> <span style="color: rgb(0, 0, 0);">e</span>;<span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(48, 48, 48);">++</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">si</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">ti</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">ci</span>;<span style="color: rgb(0, 0, 0);">scanf</span>(<span style="background-color: rgb(255, 240, 240);">"%d%d%d"</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 48);">&amp;</span><span style="color: rgb(0, 0, 0);">si</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 48);">&amp;</span><span style="color: rgb(0, 0, 0);">ti</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 48);">&amp;</span><span style="color: rgb(0, 0, 0);">ci</span>);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">matrix</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">si</span><span style="color: rgb(0, 0, 0);">][</span><span style="color: rgb(0, 0, 0);">ti</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">+=</span> <span style="color: rgb(0, 0, 0);">ci</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">t</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">ans</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">0</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">while</span>((<span style="color: rgb(0, 0, 0);">t</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">DFS</span>(<span style="color: rgb(0, 0, 208); font-weight: bold;">1</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">INF</span><span style="color: rgb(0, 0, 0);">))){</span><span style="color: rgb(0, 0, 0);">memset</span>(<span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 48);">-</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 128, 0); font-weight: bold;">sizeof</span>(<span style="color: rgb(0, 0, 0);">pre_of</span>));<span style="color: rgb(0, 0, 0);">ans</span> <span style="color: rgb(48, 48, 48);">+=</span> <span style="color: rgb(0, 0, 0);">t</span><span style="color: rgb(0, 0, 0);">;}</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">printf</span>(<span style="background-color: rgb(255, 240, 240);">"%d</span><span style="color: rgb(96, 96, 96); font-weight: bold; background-color: rgb(255, 240, 240);">\n</span><span style="background-color: rgb(255, 240, 240);">"</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">ans</span>);<br> <span style="color: rgb(0, 0, 0);">}</span><br></div><br><hr><br>终于AC了 好开心啊，郁闷我一晚上啊:),简单的Ford Fulkerson思想，深搜求增广路径不多说了，看代码。
		 </div>
