<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<header style="padding-bottom:50px">
<ul>
	<li style="float:left;padding-right:20px"><a href="../../index.html">Home</a></li>
</ul>
</header>

<style type="text/css">
	div{
		font-size:11pt;
	}
	p{
		text-indent:2em;/*段落缩进*/
		line-height:140%;/*行间距*/
	}
	blockquote {
		background:#f9f9f9;
		border-left:10px solid darkblue;
	}
	blockquote p {
		display:inline;
	}
</style>

<!--code examples

<a href=""></a>

<li><a style="text-decoration:none" href="#"></a></li>

<h2 id=""></h2>

<div style="text-align:center">
	<img  src="">
	<p>图 </p>
	</div>
		
	<sup>sup>

	<div style="background:#eee;border:1px solid #ccc;padding:5px 10px;">
	</div>

	-->


	<div>

		<!--博文标题和作者信息-->
		<h2 style="text-align:center">昂贵的聘礼-dijkstra</h2>
		<h5 style="text-align:right">update@2011-10-24</h5>
		     <div style="background:#fdfdfd;color:black;"><u>C++语言</u>: <a rel="nofollow" href="http://fayaa.com/code/">高亮代码由发芽网提供</a></div><br>     <div style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"> <span style="color: rgb(80, 112, 144);">#define MAX 110</span><br> <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">M</span>;<span style="color: rgb(128, 128, 128);">//最大的差值</span><br> <span style="color: rgb(0, 128, 0); font-weight: bold;">struct</span> <span style="color: rgb(0, 0, 0);">men</span><span style="color: rgb(0, 0, 0);">{</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">rank</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">price</span>;<br> <span style="color: rgb(0, 0, 0);">}</span><span style="color: rgb(0, 0, 0);">me</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 208); font-weight: bold;">110</span><span style="color: rgb(0, 0, 0);">];</span><br> <span style="color: rgb(0, 128, 0); font-weight: bold;">struct</span> <span style="color: rgb(0, 0, 0);">node</span><span style="color: rgb(0, 0, 0);">{</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">w</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">next</span>;<span style="color: rgb(128, 128, 128);">//顶点结构体</span><br> <span style="color: rgb(0, 0, 0);">}</span><span style="color: rgb(0, 0, 0);">edge</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 208); font-weight: bold;">110</span><span style="color: rgb(48, 48, 48);">*</span><span style="color: rgb(0, 0, 208); font-weight: bold;">110</span><span style="color: rgb(0, 0, 0);">];</span><br> <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">head</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">MAX</span><span style="color: rgb(0, 0, 0);">],</span><span style="color: rgb(0, 0, 0);">countt</span><span style="color: rgb(48, 48, 48);">=</span><span style="color: rgb(0, 0, 208); font-weight: bold;">0</span>;<span style="color: rgb(128, 128, 128);">//每次都要初始化</span><br> <span style="color: rgb(48, 48, 144); font-weight: bold;">void</span> <span style="color: rgb(0, 0, 0);">add</span>(<span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">w</span><span style="color: rgb(0, 0, 0);">){</span><span style="color: rgb(128, 128, 128);">//加边</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">edge</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">countt</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">u</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">u</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">edge</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">countt</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">v</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">v</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">edge</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">countt</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">w</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">w</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">edge</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">countt</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">next</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">head</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">];</span><span style="color: rgb(0, 0, 0);">head</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">countt</span><span style="color: rgb(48, 48, 48);">++</span>;<br> <span style="color: rgb(0, 0, 0);">}</span><br> <span style="color: rgb(0, 128, 0); font-weight: bold;">struct</span> <span style="color: rgb(0, 0, 0);">node2</span><span style="color: rgb(0, 0, 0);">{</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">ver</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">dist</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">rank_min</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">rank_max</span>; <span style="color: rgb(128, 128, 128);">//从ver出发可以以dist+自己的价格得到1物品</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">node2</span>(<span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">d</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">rm</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">rn</span><span style="color: rgb(0, 0, 0);">){</span><span style="color: rgb(0, 0, 0);">ver</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">v</span>;<span style="color: rgb(0, 0, 0);">dist</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">d</span>;<span style="color: rgb(0, 0, 0);">rank_max</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">rm</span>;<span style="color: rgb(0, 0, 0);">rank_min</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">rn</span><span style="color: rgb(0, 0, 0);">;}</span><br> <span style="color: rgb(0, 0, 0);">};</span><br> <span style="color: rgb(48, 48, 144); font-weight: bold;">bool</span> <span style="color: rgb(0, 128, 0); font-weight: bold;">operator</span> <span style="color: rgb(48, 48, 48);">&gt;</span> (<span style="color: rgb(0, 128, 0); font-weight: bold;">const</span> <span style="color: rgb(0, 0, 0);">node2</span> <span style="color: rgb(48, 48, 48);">&amp;</span><span style="color: rgb(0, 0, 0);">a</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 128, 0); font-weight: bold;">const</span> <span style="color: rgb(0, 0, 0);">node2</span> <span style="color: rgb(48, 48, 48);">&amp;</span>b<span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(128, 128, 128);">//重载优先队列的 &gt; 运算符</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">if</span>(<span style="color: rgb(0, 0, 0);">a</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">dist</span> <span style="color: rgb(48, 48, 48);">&gt;</span> b<span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">dist</span>)<span style="color: rgb(0, 128, 0); font-weight: bold;">return</span> <span style="color: rgb(0, 128, 0); font-weight: bold;">true</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">return</span> <span style="color: rgb(0, 128, 0); font-weight: bold;">false</span>;<br> <span style="color: rgb(0, 0, 0);">}</span><br> <span style="color: rgb(48, 48, 144); font-weight: bold;">bool</span> <span style="color: rgb(0, 128, 0); font-weight: bold;">operator</span> <span style="color: rgb(48, 48, 48);">&lt;</span> (<span style="color: rgb(0, 128, 0); font-weight: bold;">const</span> <span style="color: rgb(0, 0, 0);">node2</span> <span style="color: rgb(48, 48, 48);">&amp;</span><span style="color: rgb(0, 0, 0);">a</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 128, 0); font-weight: bold;">const</span> <span style="color: rgb(0, 0, 0);">node2</span> <span style="color: rgb(48, 48, 48);">&amp;</span>b<span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(128, 128, 128);">//重载优先队列的 &lt; 运算符</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">if</span>(<span style="color: rgb(0, 0, 0);">a</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">dist</span> <span style="color: rgb(48, 48, 48);">&lt;</span> b<span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">dist</span>)<span style="color: rgb(0, 128, 0); font-weight: bold;">return</span> <span style="color: rgb(0, 128, 0); font-weight: bold;">true</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">return</span> <span style="color: rgb(0, 128, 0); font-weight: bold;">false</span>;<br> <span style="color: rgb(0, 0, 0);">}</span><br> <span style="color: rgb(48, 48, 144); font-weight: bold;">long</span> <span style="color: rgb(48, 48, 144); font-weight: bold;">long</span> <span style="color: rgb(0, 0, 0);">dijkstra</span>(<span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">source</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">vertex_num</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">end</span><span style="color: rgb(48, 48, 48);">=-</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">flag</span><span style="color: rgb(48, 48, 48);">=</span><span style="color: rgb(0, 0, 208); font-weight: bold;">0</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">long</span> <span style="color: rgb(48, 48, 144); font-weight: bold;">long</span> <span style="color: rgb(0, 0, 0);">dist</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">MAX</span><span style="color: rgb(0, 0, 0);">];</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(128, 128, 128);">//优先队列(小根,top为最小值)</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">priority_queue</span><span style="color: rgb(48, 48, 48);">&lt;</span><span style="color: rgb(0, 0, 0);">node2</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">vector</span><span style="color: rgb(48, 48, 48);">&lt;</span><span style="color: rgb(0, 0, 0);">node2</span><span style="color: rgb(48, 48, 48);">&gt;</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">greater</span><span style="color: rgb(48, 48, 48);">&lt;</span><span style="color: rgb(0, 0, 0);">node2</span><span style="color: rgb(48, 48, 48);">&gt;</span> <span style="color: rgb(48, 48, 48);">&gt;</span> <span style="color: rgb(0, 0, 0);">my</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">for</span>(<span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">i</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">1</span>;<span style="color: rgb(0, 0, 0);">i</span> <span style="color: rgb(48, 48, 48);">&lt;=</span> <span style="color: rgb(0, 0, 0);">vertex_num</span>;<span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(48, 48, 48);">++</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">dist</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">1000000000000000000</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><span style="color: rgb(0, 0, 0);">dist</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">source</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">0</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">my</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">push</span>(<span style="color: rgb(0, 0, 0);">node2</span>(<span style="color: rgb(0, 0, 0);">source</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 208); font-weight: bold;">0</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">me</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">source</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">rank</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">me</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">source</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">rank</span>));<span style="color: rgb(128, 128, 128);">//放入源点</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">MAX</span><span style="color: rgb(0, 0, 0);">];</span> <span style="color: rgb(0, 0, 0);">memset</span>(<span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(48, 48, 48);">-</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 128, 0); font-weight: bold;">sizeof</span>(<span style="color: rgb(0, 0, 0);">pre_of</span>));<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">while</span>(<span style="color: rgb(48, 48, 48);">!</span><span style="color: rgb(0, 0, 0);">my</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">empty</span><span style="color: rgb(0, 0, 0);">()){</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">node2</span> <span style="color: rgb(0, 0, 0);">u</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">my</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">top</span>();<span style="color: rgb(0, 0, 0);">my</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">pop</span>();<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">if</span>(<span style="color: rgb(0, 0, 0);">flag</span> <span style="color: rgb(48, 48, 48);">&amp;&amp;</span> <span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">ver</span> <span style="color: rgb(48, 48, 48);">==</span> <span style="color: rgb(0, 0, 0);">end</span><span style="color: rgb(0, 0, 0);">){</span><span style="color: rgb(0, 128, 0); font-weight: bold;">return</span> <span style="color: rgb(0, 0, 0);">dist</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">ver</span><span style="color: rgb(0, 0, 0);">];}</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">for</span>(<span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">i</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">head</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">ver</span><span style="color: rgb(0, 0, 0);">];</span><span style="color: rgb(0, 0, 0);">i</span> <span style="color: rgb(48, 48, 48);">!=</span> <span style="color: rgb(48, 48, 48);">-</span><span style="color: rgb(0, 0, 208); font-weight: bold;">1</span>;<span style="color: rgb(0, 0, 0);">i</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">edge</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">next</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">v</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">edge</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">w</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">edge</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">w</span>;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(128, 128, 128);">//不能超过M,不仅从低到高不能，从高到低也不能 第一个卡的地方 = =，</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">if</span>(<span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">rank_max</span><span style="color: rgb(48, 48, 48);">-</span><span style="color: rgb(0, 0, 0);">me</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">rank</span> <span style="color: rgb(48, 48, 48);">&gt;</span> <span style="color: rgb(0, 0, 0);">M</span> || <span style="color: rgb(0, 0, 0);">me</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">rank</span> <span style="color: rgb(48, 48, 48);">-</span> <span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">rank_min</span> <span style="color: rgb(48, 48, 48);">&gt;</span> <span style="color: rgb(0, 0, 0);">M</span>)<span style="color: rgb(0, 128, 0); font-weight: bold;">continue</span>;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">if</span>(<span style="color: rgb(0, 0, 0);">dist</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">&gt;</span> <span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">dist</span><span style="color: rgb(48, 48, 48);">+</span><span style="color: rgb(0, 0, 0);">w</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(128, 128, 128);">//不能用dist[u.ver] + w去比较</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(128, 128, 128);">//如果这样比较，dist[u.ver]保存的就是最近的距离</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(128, 128, 128);">//但我们要求的是在满足条件的前提下的最近距离</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(128, 128, 128);">//而且dist[i]只有一个，而u.dist可以有多个，我们都把它们扔在队列里</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(128, 128, 128);">//第二个卡的地方 = =.就这样一半天没有了</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">dist</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">dist</span><span style="color: rgb(48, 48, 48);">+</span><span style="color: rgb(0, 0, 0);">w</span>;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">pre_of</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">]</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">ver</span>;<span style="color: rgb(128, 128, 128);">//保存路径</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">my</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">push</span>(<span style="color: rgb(0, 0, 0);">node2</span>(<span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">dist</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">],</span><span style="color: rgb(0, 0, 0);">mymax</span>(<span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">rank_max</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">me</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">rank</span><span style="color: rgb(0, 0, 0);">),</span>\<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">mymin</span>(<span style="color: rgb(0, 0, 0);">u</span><span style="color: rgb(0, 0, 0);">.</span><span style="color: rgb(0, 0, 0);">rank_min</span><span style="color: rgb(0, 0, 0);">,</span><span style="color: rgb(0, 0, 0);">me</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">v</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">rank</span>)));<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(48, 48, 144); font-weight: bold;">long</span> <span style="color: rgb(48, 48, 144); font-weight: bold;">long</span> <span style="color: rgb(0, 0, 0);">minn</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">me</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">source</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">price</span>;<br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">for</span>(<span style="color: rgb(48, 48, 144); font-weight: bold;">int</span> <span style="color: rgb(0, 0, 0);">i</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 208); font-weight: bold;">1</span>;<span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(48, 48, 48);">&lt;=</span> <span style="color: rgb(0, 0, 0);">vertex_num</span>;<span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(48, 48, 48);">++</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 128, 0); font-weight: bold;">if</span>(<span style="color: rgb(0, 0, 0);">dist</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">]</span><span style="color: rgb(48, 48, 48);">+</span><span style="color: rgb(0, 0, 0);">me</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">price</span> <span style="color: rgb(48, 48, 48);">&lt;</span> <span style="color: rgb(0, 0, 0);">minn</span><span style="color: rgb(0, 0, 0);">){</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">minn</span> <span style="color: rgb(48, 48, 48);">=</span> <span style="color: rgb(0, 0, 0);">dist</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">]</span><span style="color: rgb(48, 48, 48);">+</span><span style="color: rgb(0, 0, 0);">me</span><span style="color: rgb(0, 0, 0);">[</span><span style="color: rgb(0, 0, 0);">i</span><span style="color: rgb(0, 0, 0);">].</span><span style="color: rgb(0, 0, 0);">price</span>;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><br> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0);">}</span><span style="color: rgb(0, 128, 0); font-weight: bold;">return</span> <span style="color: rgb(0, 0, 0);">minn</span>;<br> <span style="color: rgb(0, 0, 0);">}</span><br></div><br><br><a rel="nofollow" href="http://poj.grids.cn/practice/1062/">昂贵的聘礼</a><br>贴个题吧，最短路，这题稍微麻烦点，很多坑（见代码注释）。最短路我一直只会floyd,这几天看课件遇到dijkstra,发现和SPFA差不多 = =.
		 </div>
